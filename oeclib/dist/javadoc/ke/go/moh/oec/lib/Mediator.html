<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_24) on Thu Apr 28 13:18:56 EAT 2011 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
Mediator (OpenEMRConnect Library)
</TITLE>

<META NAME="date" CONTENT="2011-04-28">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Mediator (OpenEMRConnect Library)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Mediator.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../ke/go/moh/oec/lib/Logger.html" title="class in ke.go.moh.oec.lib"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?ke/go/moh/oec/lib/Mediator.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Mediator.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
ke.go.moh.oec.lib</FONT>
<BR>
Class Mediator</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>ke.go.moh.oec.lib.Mediator</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../../ke/go/moh/oec/IService.html" title="interface in ke.go.moh.oec">IService</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>Mediator</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../../ke/go/moh/oec/IService.html" title="interface in ke.go.moh.oec">IService</A></DL>
</PRE>

<P>
Mediator between OEC clients and services to forward requests
 and return responses. This may include storing and forwarding requests
 and/or responses when network connections cannot be made.
 <p>
 If the user of this class
 accepts unsolicited messages (as a server), then it must register
 a callback object that is compliant with the IService interface. If the
 user of this class is just making client requests, this is not necessary.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>JGitahi, Jim Grace</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../../ke/go/moh/oec/lib/HttpService.html" title="class in ke.go.moh.oec.lib">HttpService</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#httpService">httpService</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Instance to handle HTTP protocol.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#MAX_HOP_COUNT">MAX_HOP_COUNT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maximum number of times a message may be transmitted through the
 network on its way from source to destination.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#messageSequenceNumber">messageSequenceNumber</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The number of protocol message IDs generated since this library
 was initialized.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;<A HREF="../../../../../ke/go/moh/oec/IService.html" title="interface in ke.go.moh.oec">IService</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#myCallbackObject">myCallbackObject</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reference to our caller's callbackObject that implements
 <A HREF="../../../../../ke/go/moh/oec/IService.html#getData(int, java.lang.Object)"><CODE>IService.getData(int, java.lang.Object)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;java.util.Properties</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#properties">properties</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A copy of the properties from standard file location</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../../ke/go/moh/oec/lib/QueueManager.html" title="class in ke.go.moh.oec.lib">QueueManager</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#queueManager">queueManager</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../../ke/go/moh/oec/lib/XmlPacker.html" title="class in ke.go.moh.oec.lib">XmlPacker</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#xmlPacker">xmlPacker</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Instance to pack and unpack XML</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#Mediator()">Mediator</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#authenticate(java.lang.String, java.lang.String)">authenticate</A></B>(java.lang.String&nbsp;username,
             java.lang.String&nbsp;password)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Authenticates a user to use the system.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#deliverResponse(ke.go.moh.oec.lib.Message)">deliverResponse</A></B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deliver a response that we were waiting for.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#generateMessageId()">generateMessageId</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new message ID to use for a message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.Object</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#getData(int, java.lang.Object)">getData</A></B>(int&nbsp;requestTypeId,
        java.lang.Object&nbsp;requestData)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Makes a remote data request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#getIpAddressPort(java.lang.String)">getIpAddressPort</A></B>(java.lang.String&nbsp;destination)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets IP address and port (next hop from here) for a destination</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#getProperty(java.lang.String)">getProperty</A></B>(java.lang.String&nbsp;propertyName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the value of a named property from a standard properties file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#processLocalMessage(java.lang.String)">processLocalMessage</A></B>(java.lang.String&nbsp;xml)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process a HTTP message that is destined for us.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#processReceivedMessage(java.lang.String, java.lang.String, int, boolean)">processReceivedMessage</A></B>(java.lang.String&nbsp;xml,
                       java.lang.String&nbsp;destination,
                       int&nbsp;hopCount,
                       boolean&nbsp;toBeQueued)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process a received HTTP message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#processUnsolicitedMessage(ke.go.moh.oec.lib.Message)">processUnsolicitedMessage</A></B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process an unsolicited message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#registerCallback(ke.go.moh.oec.IService)">registerCallback</A></B>(<A HREF="../../../../../ke/go/moh/oec/IService.html" title="interface in ke.go.moh.oec">IService</A>&nbsp;callbackObject)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers a listener to receive data requests

 This method is used by server software to register an object supporting
 the IService interface getData() method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#registerRequest(ke.go.moh.oec.lib.Message)">registerRequest</A></B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds this message to a list of messages for which we expect a response.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.Object</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#sendData(ke.go.moh.oec.lib.Message)">sendData</A></B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends data to a remote destination.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#sendMessage(java.lang.String, java.lang.String, java.lang.String, int, boolean)">sendMessage</A></B>(java.lang.String&nbsp;xml,
            java.lang.String&nbsp;ipAddressPort,
            java.lang.String&nbsp;destination,
            int&nbsp;hopCount,
            boolean&nbsp;toBeQueued)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends a packed XML message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#stop()">stop</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stop the OpenEMRConnect library services.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.Object</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../ke/go/moh/oec/lib/Mediator.html#waitForResponse(ke.go.moh.oec.lib.Message)">waitForResponse</A></B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waits for a response to our request message.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="MAX_HOP_COUNT"><!-- --></A><H3>
MAX_HOP_COUNT</H3>
<PRE>
private static final int <B>MAX_HOP_COUNT</B></PRE>
<DL>
<DD>Maximum number of times a message may be transmitted through the
 network on its way from source to destination.
 <p>
 For example, the first time a message is sent, the hop count is 1.
 If the message is received by another program and forwarded on,
 the hop count is 2, and so on.
 <p>
 In the present design, the hop count should never exceed 3. If it does,
 it probably indicates a loop where one system is routing the message
 to a second system, and the second system is routing it back to the
 first system.
 <p>
 If the hop count exceeds the maximum, the message is discarded and
 an error reported.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#ke.go.moh.oec.lib.Mediator.MAX_HOP_COUNT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="messageSequenceNumber"><!-- --></A><H3>
messageSequenceNumber</H3>
<PRE>
private static int <B>messageSequenceNumber</B></PRE>
<DL>
<DD>The number of protocol message IDs generated since this library
 was initialized. The sequence number forms part of the message ID.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="httpService"><!-- --></A><H3>
httpService</H3>
<PRE>
private <A HREF="../../../../../ke/go/moh/oec/lib/HttpService.html" title="class in ke.go.moh.oec.lib">HttpService</A> <B>httpService</B></PRE>
<DL>
<DD>Instance to handle HTTP protocol.
 Start the instance with a reference to us, so it knows where to
 deliver any HTTP messages received.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="queueManager"><!-- --></A><H3>
queueManager</H3>
<PRE>
private <A HREF="../../../../../ke/go/moh/oec/lib/QueueManager.html" title="class in ke.go.moh.oec.lib">QueueManager</A> <B>queueManager</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="xmlPacker"><!-- --></A><H3>
xmlPacker</H3>
<PRE>
private <A HREF="../../../../../ke/go/moh/oec/lib/XmlPacker.html" title="class in ke.go.moh.oec.lib">XmlPacker</A> <B>xmlPacker</B></PRE>
<DL>
<DD>Instance to pack and unpack XML
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="myCallbackObject"><!-- --></A><H3>
myCallbackObject</H3>
<PRE>
private static <A HREF="../../../../../ke/go/moh/oec/IService.html" title="interface in ke.go.moh.oec">IService</A> <B>myCallbackObject</B></PRE>
<DL>
<DD>Reference to our caller's callbackObject that implements
 <A HREF="../../../../../ke/go/moh/oec/IService.html#getData(int, java.lang.Object)"><CODE>IService.getData(int, java.lang.Object)</CODE></A>.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="properties"><!-- --></A><H3>
properties</H3>
<PRE>
static java.util.Properties <B>properties</B></PRE>
<DL>
<DD>A copy of the properties from standard file location
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Mediator()"><!-- --></A><H3>
Mediator</H3>
<PRE>
public <B>Mediator</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="stop()"><!-- --></A><H3>
stop</H3>
<PRE>
public void <B>stop</B>()</PRE>
<DL>
<DD>Stop the OpenEMRConnect library services.

 This routine should be called for an orderly shut-down
 of the Mediator library.
 <p>
 Call this method last, after you are through using the services.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getProperty(java.lang.String)"><!-- --></A><H3>
getProperty</H3>
<PRE>
public static java.lang.String <B>getProperty</B>(java.lang.String&nbsp;propertyName)</PRE>
<DL>
<DD>Gets the value of a named property from a standard properties file.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>propertyName</CODE> - name of the property whose value we want
<DT><B>Returns:</B><DD>the value of the requested property</DL>
</DD>
</DL>
<HR>

<A NAME="authenticate(java.lang.String, java.lang.String)"><!-- --></A><H3>
authenticate</H3>
<PRE>
public static boolean <B>authenticate</B>(java.lang.String&nbsp;username,
                                   java.lang.String&nbsp;password)</PRE>
<DL>
<DD>Authenticates a user to use the system. Returns true if the username
 and password are valid and the user is authorized to use this system.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>username</CODE> - the username to be authenticated.<DD><CODE>password</CODE> - the password to be authenticated.
<DT><B>Returns:</B><DD>a boolean value indicating authentication success or failure.</DL>
</DD>
</DL>
<HR>

<A NAME="registerCallback(ke.go.moh.oec.IService)"><!-- --></A><H3>
registerCallback</H3>
<PRE>
public static void <B>registerCallback</B>(<A HREF="../../../../../ke/go/moh/oec/IService.html" title="interface in ke.go.moh.oec">IService</A>&nbsp;callbackObject)</PRE>
<DL>
<DD>Registers a listener to receive data requests

 This method is used by server software to register an object supporting
 the IService interface getData() method. When a message for this server
 is received (and is not a response to an outstanding request), it will
 be given to the getData() method of this object.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>callbackObject</CODE> - object implementing IService interface</DL>
</DD>
</DL>
<HR>

<A NAME="getData(int, java.lang.Object)"><!-- --></A><H3>
getData</H3>
<PRE>
public java.lang.Object <B>getData</B>(int&nbsp;requestTypeId,
                                java.lang.Object&nbsp;requestData)</PRE>
<DL>
<DD>Makes a remote data request. This version is called by our user
 to send a new data request to a server.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../ke/go/moh/oec/IService.html#getData(int, java.lang.Object)">getData</A></CODE> in interface <CODE><A HREF="../../../../../ke/go/moh/oec/IService.html" title="interface in ke.go.moh.oec">IService</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>requestTypeId</CODE> - type of request (see RequestType.java)<DD><CODE>requestData</CODE> - object containing data for the request
<DT><B>Returns:</B><DD>object containing response data resulting from the request, or null if none</DL>
</DD>
</DL>
<HR>

<A NAME="generateMessageId()"><!-- --></A><H3>
generateMessageId</H3>
<PRE>
private java.lang.String <B>generateMessageId</B>()</PRE>
<DL>
<DD>Constructs a new message ID to use for a message. The ID must be
 unique for requests coming from this instance address (this
 client or service running on this machine.)
 <p>
 We construct the message ID by putting two components together. The first
 is the current time in milliseconds (since January 1, 1970.) The
 second is a sequence number that starts at 0 when this process
 started running. So even if we generate two message IDs without the
 system time changing, they will be unique.
 <p>
 Note that if a message is a response to another message, it typically
 uses the request message ID as its own, so the request and response
 can be correlated. In this case, a new ID is not generated for the
 response message.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the new request ID.</DL>
</DD>
</DL>
<HR>

<A NAME="sendData(ke.go.moh.oec.lib.Message)"><!-- --></A><H3>
sendData</H3>
<PRE>
private java.lang.Object <B>sendData</B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</PRE>
<DL>
<DD>Sends data to a remote destination. This version is called internally, in one of two ways:
 <p>
 1. From the public <code>getData</code> request, to continue processing a user
 client request that needs to be sent to a server.
 <p>
 2. From our received message handling. This is when an unsolicited request has
 come here for a server that is bound to us. We have delivered the request to
 the server. The server has given us back a response. And now we need to pack
 up the response and return it to the client.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - message to be sent
<DT><B>Returns:</B><DD>object containing response data from the request</DL>
</DD>
</DL>
<HR>

<A NAME="registerRequest(ke.go.moh.oec.lib.Message)"><!-- --></A><H3>
registerRequest</H3>
<PRE>
private void <B>registerRequest</B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</PRE>
<DL>
<DD>Adds this message to a list of messages for which we expect a response.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - message we are expecting a response to</DL>
</DD>
</DL>
<HR>

<A NAME="waitForResponse(ke.go.moh.oec.lib.Message)"><!-- --></A><H3>
waitForResponse</H3>
<PRE>
private java.lang.Object <B>waitForResponse</B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</PRE>
<DL>
<DD>Waits for a response to our request message. When we get the
 response, return it to our caller. If there is no response message
 after a defined timeout period, return null.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - message we are waiting for a response to
<DT><B>Returns:</B><DD>data object to return to our caller, or null if timed out.</DL>
</DD>
</DL>
<HR>

<A NAME="getIpAddressPort(java.lang.String)"><!-- --></A><H3>
getIpAddressPort</H3>
<PRE>
private java.lang.String <B>getIpAddressPort</B>(java.lang.String&nbsp;destination)</PRE>
<DL>
<DD>Gets IP address and port (next hop from here) for a destination
 <p>
 The IP address and port corresponding to a destination address is found
 in properties for this application starting with "IPAddressPort."
 If the full address is not found, then we look for successively
 higher levels in the address name, where levels are separated by
 dots. Finally we look for the catch-all entry "IPAddressPort.*"
 to which we forward any otherwise-unresolved address.
 <p>
 For example, if the address to find is "aa.bb.cc", we will look
 for the following properties in this order until we find a value:
 <p>
 IpAddressPort.aa.bb.cc   <br>
 IpAddressPort.aa.bb      <br>
 IpAddressPort.aa         <br>
 IpAddressPort.*          <br>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>destination</CODE> - where the message is to be sent
<DT><B>Returns:</B><DD>IP address:port to which to forward the message.
 Returns <code>null</code> if the destination is ourselves,
 or the destination address cannot be translated to IP + port.</DL>
</DD>
</DL>
<HR>

<A NAME="processReceivedMessage(java.lang.String, java.lang.String, int, boolean)"><!-- --></A><H3>
processReceivedMessage</H3>
<PRE>
protected void <B>processReceivedMessage</B>(java.lang.String&nbsp;xml,
                                      java.lang.String&nbsp;destination,
                                      int&nbsp;hopCount,
                                      boolean&nbsp;toBeQueued)</PRE>
<DL>
<DD>Process a received HTTP message. Either this is a message that is
 destined for us, or we are an intermediate node that should forward the
 message on its way to the next node. If we find that we have an
 IP address to which we should forward this message, than forward it
 on its way. Otherwise we will unpack and process it locally.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xml</CODE> - the body of the HTTP message received<DD><CODE>destination</CODE> - the ultimate message destination (from the URL)<DD><CODE>hopCount</CODE> - the forwarding hop count (from the URL)<DD><CODE>toBeQueued</CODE> - the indicator of whether this message should be stored and forwarded (from the URL)</DL>
</DD>
</DL>
<HR>

<A NAME="processLocalMessage(java.lang.String)"><!-- --></A><H3>
processLocalMessage</H3>
<PRE>
private void <B>processLocalMessage</B>(java.lang.String&nbsp;xml)</PRE>
<DL>
<DD>Process a HTTP message that is destined for us. We have already determined that it
 is not a message that we are just routing through to somewhere else.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xml</CODE> - the message received from the HTTP listener.</DL>
</DD>
</DL>
<HR>

<A NAME="deliverResponse(ke.go.moh.oec.lib.Message)"><!-- --></A><H3>
deliverResponse</H3>
<PRE>
private boolean <B>deliverResponse</B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</PRE>
<DL>
<DD>Deliver a response that we were waiting for. This method is called in the
 thread that was listening for HTTP messages. If the message matches one
 for which we are waiting, then wake up the thread waiting for the message
 and pass the response to it.
 <p>
 Otherwise, indicate that we were not waiting for this message.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - the unpacked message information.
<DT><B>Returns:</B><DD>true if we were waiting for the message and it was delivered,
 otherwise false.</DL>
</DD>
</DL>
<HR>

<A NAME="processUnsolicitedMessage(ke.go.moh.oec.lib.Message)"><!-- --></A><H3>
processUnsolicitedMessage</H3>
<PRE>
private void <B>processUnsolicitedMessage</B>(<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib">Message</A>&nbsp;m)</PRE>
<DL>
<DD>Process an unsolicited message. We have already determined that this
 was not the response to a request that we were waiting for.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - the unpacked message information.</DL>
</DD>
</DL>
<HR>

<A NAME="sendMessage(java.lang.String, java.lang.String, java.lang.String, int, boolean)"><!-- --></A><H3>
sendMessage</H3>
<PRE>
private void <B>sendMessage</B>(java.lang.String&nbsp;xml,
                         java.lang.String&nbsp;ipAddressPort,
                         java.lang.String&nbsp;destination,
                         int&nbsp;hopCount,
                         boolean&nbsp;toBeQueued)</PRE>
<DL>
<DD>Sends a packed XML message. This is common code that is called
 for any of the following reasons:
 <p>
 1. Forward a received message that is not ultimately destined for us.
 <p>
 2. Send a new request to a server.
 <p>
 3. Send a response back from a server.
 <p>
 We check the hop count to make sure the message is not caught in a
 routing loop. Then we see whether the message should be sent
 with our without the queueing mechanism for storing and forwarding.
 Then we send it.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xml</CODE> - the XML packed message to send<DD><CODE>ipAddressPort</CODE> - IP address and port to which to send the message<DD><CODE>destination</CODE> - ultimate destination address for this message<DD><CODE>hopCount</CODE> - how many times this message has been sent<DD><CODE>toBeQueued</CODE> - is this message to be queued for later if it can't be sent now?</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Mediator.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../ke/go/moh/oec/lib/Logger.html" title="class in ke.go.moh.oec.lib"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../ke/go/moh/oec/lib/Message.html" title="class in ke.go.moh.oec.lib"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?ke/go/moh/oec/lib/Mediator.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Mediator.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
